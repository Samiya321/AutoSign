name: 签到

on:
    workflow_dispatch:
    schedule:
        - cron: "5 16 * * *"
    watch:
        types: [started]

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v3

            - name: "初始化Python"
              uses: actions/setup-python@v4
              with:
                python-version: '3.8'

            - name: "安装python依赖包"
              run: pip install -r ./requirements.txt

            - name: "初始化Node.js"
              uses: actions/setup-node@v3
              with:
                  node-version: 16

            - name: "安装npm"
              run: |
                  npm install

            # - name: "哔哩哔哩签到"
            #   env:
            #       BILI_USER: ${{ secrets.BILI_USER }}
            #       BILI_PASS: ${{ secrets.BILI_PASS }}
            #       BILI_COOKIE: ${{ secrets.BILI_COOKIE }}
            #       BILI_NUM: ${{ secrets.BILI_NUM }}
            #       BILI_TYPE: ${{ secrets.BILI_TYPE }}
            #       BILI_S2C: ${{ secrets.BILI_S2C }}
            #       SEND_KEY: ${{ secrets.SEND_KEY }}
            #       TG_BOT_TOKEN: ${{ secrets.TG_BOT_TOKEN }}
            #       TG_USER_ID: ${{ secrets.TG_USER_ID }}
            #   run: python3 function/bilibili/bilibili.py

            # - name: 'Hostloc签到'
            #   env:
            #       HOSTLOC_USERNAME: ${{ secrets.HOSTLOC_USERNAME }}
            #       HOSTLOC_PASSWORD: ${{ secrets.HOSTLOC_PASSWORD }}
            #       SEND_KEY: ${{ secrets.SEND_KEY }}
            #       TG_BOT_TOKEN: ${{ secrets.TG_BOT_TOKEN }}
            #       TG_USER_ID: ${{ secrets.TG_USER_ID }}                  
            #   run: python function/hostloc/hostloc.py
  
            # - name: "V2ex自动签到"
            #   env:
            #       V2EXCK: ${{ secrets.V2EXCK }}
            #       SEND_KEY: ${{ secrets.SEND_KEY }}
            #       TG_BOT_TOKEN: ${{ secrets.TG_BOT_TOKEN }}
            #       TG_USER_ID: ${{ secrets.TG_USER_ID }}   
            #   run: |
            #       node function/v2ex/v2ex.js                  

            # - name: "爱奇艺会员签到"
            #   run: |
            #       node function/iQIYI-DailyBonus/iqiyi.js
            #   env:
            #       iQIYI_COOKIE: ${{ secrets.iQIYI_COOKIE }}
            #       SEND_KEY: ${{ secrets.SEND_KEY }}
            #       TG_BOT_TOKEN: ${{ secrets.TG_BOT_TOKEN }}
            #       TG_USER_ID: ${{ secrets.TG_USER_ID }}

            # - name: "腾讯视频签到"
            #   run: |
            #       node function/q_video/q_video.js
            #   env:
            #       V_REF_URL: ${{ secrets.V_REF_URL }}
            #       V_COOKIE: ${{ secrets.V_COOKIE }}
            #       SEND_KEY: ${{ secrets.SEND_KEY }}
            #       TG_BOT_TOKEN: ${{ secrets.TG_BOT_TOKEN }}
            #       TG_USER_ID: ${{ secrets.TG_USER_ID }}

            # - name: "小米自动刷步数"
            #   run: python3 function/xiaomi_sports/xiaomi.py
            #   env:
            #       Xiaomi_User: ${{ secrets.Xiaomi_User }}
            #       Xiaomi_Pw: ${{ secrets.Xiaomi_Pw }}
            #       Xiaomi_Bs: ${{ secrets.Xiaomi_Bs }}
            #       SEND_KEY: ${{ secrets.SEND_KEY }}
            #       TG_BOT_TOKEN: ${{ secrets.TG_BOT_TOKEN }}
            #       TG_USER_ID: ${{ secrets.TG_USER_ID }}

            - name: run meituanshenquan scripts
              env:
                SEND_KEY: ${{ secrets.SEND_KEY }}
                TG_BOT_TOKEN: ${{ secrets.TG_BOT_TOKEN }}
                TG_USER_ID: ${{ secrets.TG_USER_ID }}
                yesornot: "n" #必填项目,双引号内填写n则代表不开启server酱推送,填写n则开启推送
                yesornot2: "n" #必填项目,双引号内填写n则代表不开启pushPlus推送,填写n则开启推送
                token: ${{ secrets.MTTOKEN }}   #必填项目,请自行在fork的项目上设置 秘密环境变量，变量含义：美团token
                on: 1  #必填项目,此配置为默认开启在有十元必中符的情况下自动抢15以上红包，若需关闭，请将1改为0，注意勿破坏空格缩进
                left : 5   #必填项目,若在默认开启自动抢15以上红包且有10元以上必中符的情况下，无法抢到必中符保底红包，请手动将该值从0改大些
                wm_latitude: "22266541" #必填项目,此处双引号填写不带小数点的纬度,此处为成都纬度
                wm_longitude: "113543522" #必填项目,此处双引号填写不带小数点的经度，此处为成都经度
                propId: "5" #必填项目,此处双引号填写红包豆自动兑换的道具类型,5对应15元必中符，建议填写5即可
                exchangeCoinNumber: "1800" #必填项目,此处双引号填写兑换上一行必中符所需红包豆,建议填写1800即可
                setexchangedou: "1800" #必填项目,此处双引号填写当红包豆大于等于多少豆时才执行红包豆转必中符脚本,建议填写1800即可,脚本会在抢不到15元必中符时自动兑换8元必中符
              run: |
                python function/meituan/mt-action-scripts.py            
